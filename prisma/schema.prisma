generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model appartenir {
  id        Int
  id_guilds Int
  guilds    guilds @relation(fields: [id_guilds], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "appartenir_guilds0_fk")
  users     users  @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "appartenir_users_fk")

  @@id([id, id_guilds], map: "appartenir_pk")
}

model associer {
  id          Int
  id_channels Int
  channels    channels @relation(fields: [id_channels], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "associer_channels0_fk")
  template    template @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "associer_template_fk")

  @@id([id, id_channels], map: "associer_pk")
}

model category {
  id            Int        @id(map: "category_pk") @default(autoincrement())
  category_uuid String     @db.VarChar(255)
  category_name String     @db.VarChar(255)
  channels      channels[]
  template      template[]
  created_at    DateTime   @default(now())
  updated_at    DateTime   @updatedAt
}

model channels {
  id                Int                 @id(map: "channels_pk") @default(autoincrement())
  channel_name      String              @db.VarChar(255)
  channel_uuid      Int
  id_guilds         Int
  id_category       Int
  associer          associer[]
  category          category            @relation(fields: [id_category], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "channels_category0_fk")
  guilds            guilds              @relation(fields: [id_guilds], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "channels_guilds_fk")
  inclure           inclure[]
  resources_sharing resources_sharing[]
  created_at        DateTime            @default(now())
  updated_at        DateTime            @updatedAt
}

model config {
  id         Int     @id(map: "config_pk") @default(autoincrement())
  config     String  @db.VarChar(2000)
  id_courses Int
  courses    courses @relation(fields: [id_courses], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "config_courses_fk")
}

model courses {
  id          Int      @id(map: "courses_pk") @default(autoincrement())
  course_name String   @db.VarChar(255)
  id_roles    Int
  config      config[]
  roles       roles    @relation(fields: [id_roles], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "courses_roles_fk")
  guilds      guilds[]
  promo       promo[]
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model guilds {
  id          Int          @id(map: "guilds_pk") @default(autoincrement())
  guild_uuid  Int
  guild_name  String       @db.VarChar(50)
  member_size Int
  id_courses  Int
  appartenir  appartenir[]
  channels    channels[]
  courses     courses      @relation(fields: [id_courses], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "guilds_courses_fk")
  created_at  DateTime     @default(now())
  updated_at  DateTime     @updatedAt
}

model inclure {
  id          Int
  id_channels Int
  channels    channels @relation(fields: [id_channels], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "inclure_channels0_fk")
  messages    messages @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "inclure_messages_fk")

  @@id([id, id_channels], map: "inclure_pk")
}

model link {
  id         Int      @id(map: "link_pk") @default(autoincrement())
  link       String   @db.VarChar(50)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

model messages {
  id              Int       @id(map: "messages_pk") @default(autoincrement())
  message_uuid    Int
  message_content String    @db.VarChar(255)
  tag             String?   @db.VarChar(50)
  id_users        Int
  inclure         inclure[]
  users           users     @relation(fields: [id_users], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "messages_users_fk")
  ticket          ticket[]
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
}

model promo {
  id          Int      @id(map: "promo_pk") @default(autoincrement())
  promo_state Boolean
  id_courses  Int
  id_roles    Int
  courses     courses  @relation(fields: [id_courses], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "promo_courses_fk")
  roles       roles    @relation(fields: [id_roles], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "promo_roles0_fk")
  users       users[]
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model resources_sharing {
  id          Int      @id(map: "resources_sharing_pk") @default(autoincrement())
  up_vote     Int
  down_vote   Int
  id_channels Int
  id_users    Int
  channels    channels @relation(fields: [id_channels], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "resources_sharing_channels_fk")
  users       users    @relation(fields: [id_users], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "resources_sharing_users0_fk")
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model roles {
  id         Int       @id(map: "roles_pk") @default(autoincrement())
  role_uuid  Int
  role_name  String    @db.VarChar(255)
  role_color String    @db.VarChar(20)
  courses    courses[]
  promo      promo[]
  ticket     ticket[]
  users      users[]
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
}

model signature {
  id         Int      @id(map: "signature_pk") @default(autoincrement())
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

model template {
  id          Int        @id(map: "template_pk") @default(autoincrement())
  id_category Int?
  associer    associer[]
  category    category?  @relation(fields: [id_category], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "template_category_fk")
  created_at  DateTime   @default(now())
  updated_at  DateTime   @updatedAt
}

model ticket {
  id           Int      @id(map: "ticket_pk") @default(autoincrement())
  ticket_tag   String   @db.VarChar(255)
  ticket_state Boolean
  id_messages  Int
  id_roles     Int
  id_users     Int
  messages     messages @relation(fields: [id_messages], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ticket_messages_fk")
  roles        roles    @relation(fields: [id_roles], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ticket_roles0_fk")
  users        users    @relation(fields: [id_users], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ticket_users1_fk")
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model users {
  id                Int                 @id(map: "users_pk") @default(autoincrement())
  username          String              @db.VarChar(255)
  mail              String              @db.VarChar(255)
  user_uuid         Int
  id_roles          Int
  id_promo          Int?
  appartenir        appartenir[]
  messages          messages[]
  resources_sharing resources_sharing[]
  ticket            ticket[]
  promo             promo?              @relation(fields: [id_promo], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "users_promo0_fk")
  roles             roles               @relation(fields: [id_roles], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "users_roles_fk")
  created_at        DateTime            @default(now())
  updated_at        DateTime            @updatedAt
}
